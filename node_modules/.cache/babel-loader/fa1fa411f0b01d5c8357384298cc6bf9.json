{"ast":null,"code":"import _objectSpread from\"/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Code/Week5-Part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Code/Week5-Part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//import logo from './logo.svg';\nimport'./App.css';import{useEffect,useState}from'react';import Product from'./Product';import ProductForm from'./ProductForm';import productServices from'./services/products';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showAll=_useState4[0],setShowAll=_useState4[1];useEffect(function(){console.log('effect');productServices.getAll().then(function(object){console.log('promise fulfilled');setProducts(object);});},[]);console.log('render',products.length,'pieces of products');var productToShow=showAll?products:products.filter(function(product){return product.category==='Electronic';});var addLike=function addLike(product){var newProduct=_objectSpread(_objectSpread({},product),{},{likes:product.likes+1});console.log('update likes in item',newProduct);productServices.update(newProduct).then(function(data){console.log(\"got response\",data);var newProducts=products.map(function(product){return product.id===data.id?data:product;});setProducts(newProducts);}).catch(function(error){alert('we got an error');}).finally(console.log('We have done'));};var addProduct=function addProduct(productObject){productServices.create(productObject).then(function(object){console.log('the returned response for the post request',object);setProducts(products.concat(object));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\" My Favorite Products\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setShowAll(!showAll);},children:[\"Show \",showAll?'Electronics':'All']})}),/*#__PURE__*/_jsx(\"ul\",{children:productToShow.map(function(product,index){return/*#__PURE__*/_jsx(Product,{product:product,addLike:addLike},index);})}),/*#__PURE__*/_jsx(ProductForm,{addProduct:addProduct})]});};export default App;","map":{"version":3,"sources":["/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Code/Week5-Part2/src/App.js"],"names":["useEffect","useState","Product","ProductForm","productServices","App","products","setProducts","showAll","setShowAll","console","log","getAll","then","object","length","productToShow","filter","product","category","addLike","newProduct","likes","update","data","newProducts","map","id","catch","error","alert","finally","addProduct","productObject","create","concat","index"],"mappings":"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","sourcesContent":["//import logo from './logo.svg';\nimport './App.css';\nimport { useEffect, useState} from 'react';\nimport Product from './Product';\nimport ProductForm from './ProductForm';\nimport productServices from './services/products';\n\nconst App = () => {\n  const[products, setProducts] = useState([])\n  const[showAll, setShowAll] = useState(true)\n\n  useEffect(()=> {\n    console.log('effect')\n    productServices.getAll()\n    .then(object => {\n      console.log('promise fulfilled')\n      setProducts(object)\n    })\n  }, [])\n\n  console.log('render', products.length, 'pieces of products')\n\n  const productToShow = showAll\n  ? products\n  : products.filter(product => product.category === 'Electronic')\n\n  const addLike = (product) => {\n    const newProduct = {...product, likes: product.likes+1}\n    console.log('update likes in item', newProduct)\n    productServices.update(newProduct)\n        .then(data => {\n          console.log(\"got response\", data)\n          const newProducts = products.map(\n            product => product.id === data.id ? data : product\n          )\n          setProducts(newProducts)\n        })\n        .catch(\n          (error) => {\n            alert('we got an error')\n          }\n        )\n        .finally(\n          console.log('We have done')\n        )\n  }\n\n  const addProduct = (productObject) => {\n    productServices.create(productObject)\n    .then(object => {\n      console.log('the returned response for the post request', object)\n      setProducts(products.concat(object)) \n    })\n  }\n\n  return(\n    <div className=\"App\">\n      <h3> My Favorite Products</h3>\n      <div>\n        <button onClick={() => setShowAll(!showAll)}> \n          Show {showAll? 'Electronics' : 'All'}\n        </button>\n      </div>\n      <ul>\n        {productToShow.map((product, index) => \n          <Product key={index} product={product} addLike={addLike}/>\n        )}\n      </ul>\n      <ProductForm addProduct={addProduct}/>\n    </div>\n  )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}