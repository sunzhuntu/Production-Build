{"ast":null,"code":"var _jsxFileName = \"/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Code/Week5-Part2/src/App.js\",\n    _s = $RefreshSig$();\n\n//import logo from './logo.svg';\nimport './App.css';\nimport { useEffect, useState } from 'react';\nimport Product from './Product';\nimport ProductForm from './ProductForm';\nimport productServices from './services/products';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [showAll, setShowAll] = useState(true);\n  useEffect(() => {\n    console.log('effect');\n    productServices.getAll().then(object => {\n      console.log('promise fulfilled');\n      setProducts(object);\n    });\n  }, []);\n  console.log('render', products.length, 'pieces of products');\n  const productToShow = showAll ? products : products.filter(product => product.category === 'Electronic');\n\n  const addLike = product => {\n    const newProduct = { ...product,\n      likes: product.likes + 1\n    };\n    console.log('update likes in item', newProduct);\n    productServices.update(newProduct).then(data => {\n      console.log(\"got response\", data);\n      const newProducts = products.map(product => product.id === data.id ? data : product);\n      setProducts(newProducts);\n    }).catch(error => {\n      alert('we got an error');\n    }).finally(console.log('We have done'));\n  };\n\n  const addProduct = productObject => {\n    productServices.create(productObject).then(object => {\n      console.log('the returned response for the post request', object);\n      setProducts(products.concat(object));\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \" My Favorite Products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAll(!showAll),\n        children: [\"Show \", showAll ? 'Electronics' : 'All']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: productToShow.map((product, index) => /*#__PURE__*/_jsxDEV(Product, {\n        product: product,\n        addLike: addLike\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductForm, {\n      addProduct: addProduct\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"whYtA0/LkJCtV/BBmjIbTmJVNtI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Code/Week5-Part2/src/App.js"],"names":["useEffect","useState","Product","ProductForm","productServices","App","products","setProducts","showAll","setShowAll","console","log","getAll","then","object","length","productToShow","filter","product","category","addLike","newProduct","likes","update","data","newProducts","map","id","catch","error","alert","finally","addProduct","productObject","create","concat","index"],"mappings":"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","sourcesContent":["//import logo from './logo.svg';\nimport './App.css';\nimport { useEffect, useState} from 'react';\nimport Product from './Product';\nimport ProductForm from './ProductForm';\nimport productServices from './services/products';\n\nconst App = () => {\n  const[products, setProducts] = useState([])\n  const[showAll, setShowAll] = useState(true)\n\n  useEffect(()=> {\n    console.log('effect')\n    productServices.getAll()\n    .then(object => {\n      console.log('promise fulfilled')\n      setProducts(object)\n    })\n  }, [])\n\n  console.log('render', products.length, 'pieces of products')\n\n  const productToShow = showAll\n  ? products\n  : products.filter(product => product.category === 'Electronic')\n\n  const addLike = (product) => {\n    const newProduct = {...product, likes: product.likes+1}\n    console.log('update likes in item', newProduct)\n    productServices.update(newProduct)\n        .then(data => {\n          console.log(\"got response\", data)\n          const newProducts = products.map(\n            product => product.id === data.id ? data : product\n          )\n          setProducts(newProducts)\n        })\n        .catch(\n          (error) => {\n            alert('we got an error')\n          }\n        )\n        .finally(\n          console.log('We have done')\n        )\n  }\n\n  const addProduct = (productObject) => {\n    productServices.create(productObject)\n    .then(object => {\n      console.log('the returned response for the post request', object)\n      setProducts(products.concat(object)) \n    })\n  }\n\n  return(\n    <div className=\"App\">\n      <h3> My Favorite Products</h3>\n      <div>\n        <button onClick={() => setShowAll(!showAll)}> \n          Show {showAll? 'Electronics' : 'All'}\n        </button>\n      </div>\n      <ul>\n        {productToShow.map((product, index) => \n          <Product key={index} product={product} addLike={addLike}/>\n        )}\n      </ul>\n      <ProductForm addProduct={addProduct}/>\n    </div>\n  )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}